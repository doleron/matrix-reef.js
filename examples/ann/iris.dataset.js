
const rawdata = [
    [5.1, 3.5, 1.4, 0.2, "Iris-setosa"],
    [4.9, 3.0, 1.4, 0.2, "Iris-setosa"],
    [4.7, 3.2, 1.3, 0.2, "Iris-setosa"],
    [4.6, 3.1, 1.5, 0.2, "Iris-setosa"],
    [5.0, 3.6, 1.4, 0.2, "Iris-setosa"],
    [5.4, 3.9, 1.7, 0.4, "Iris-setosa"],
    [4.6, 3.4, 1.4, 0.3, "Iris-setosa"],
    [5.0, 3.4, 1.5, 0.2, "Iris-setosa"],
    [4.4, 2.9, 1.4, 0.2, "Iris-setosa"],
    [4.9, 3.1, 1.5, 0.1, "Iris-setosa"],
    [5.4, 3.7, 1.5, 0.2, "Iris-setosa"],
    [4.8, 3.4, 1.6, 0.2, "Iris-setosa"],
    [4.8, 3.0, 1.4, 0.1, "Iris-setosa"],
    [4.3, 3.0, 1.1, 0.1, "Iris-setosa"],
    [5.8, 4.0, 1.2, 0.2, "Iris-setosa"],
    [5.7, 4.4, 1.5, 0.4, "Iris-setosa"],
    [5.4, 3.9, 1.3, 0.4, "Iris-setosa"],
    [5.1, 3.5, 1.4, 0.3, "Iris-setosa"],
    [5.7, 3.8, 1.7, 0.3, "Iris-setosa"],
    [5.1, 3.8, 1.5, 0.3, "Iris-setosa"],
    [5.4, 3.4, 1.7, 0.2, "Iris-setosa"],
    [5.1, 3.7, 1.5, 0.4, "Iris-setosa"],
    [4.6, 3.6, 1.0, 0.2, "Iris-setosa"],
    [5.1, 3.3, 1.7, 0.5, "Iris-setosa"],
    [4.8, 3.4, 1.9, 0.2, "Iris-setosa"],
    [5.0, 3.0, 1.6, 0.2, "Iris-setosa"],
    [5.0, 3.4, 1.6, 0.4, "Iris-setosa"],
    [5.2, 3.5, 1.5, 0.2, "Iris-setosa"],
    [5.2, 3.4, 1.4, 0.2, "Iris-setosa"],
    [4.7, 3.2, 1.6, 0.2, "Iris-setosa"],
    [4.8, 3.1, 1.6, 0.2, "Iris-setosa"],
    [5.4, 3.4, 1.5, 0.4, "Iris-setosa"],
    [5.2, 4.1, 1.5, 0.1, "Iris-setosa"],
    [5.5, 4.2, 1.4, 0.2, "Iris-setosa"],
    [4.9, 3.1, 1.5, 0.1, "Iris-setosa"],
    [5.0, 3.2, 1.2, 0.2, "Iris-setosa"],
    [5.5, 3.5, 1.3, 0.2, "Iris-setosa"],
    [4.9, 3.1, 1.5, 0.1, "Iris-setosa"],
    [4.4, 3.0, 1.3, 0.2, "Iris-setosa"],
    [5.1, 3.4, 1.5, 0.2, "Iris-setosa"],
    [5.0, 3.5, 1.3, 0.3, "Iris-setosa"],
    [4.5, 2.3, 1.3, 0.3, "Iris-setosa"],
    [4.4, 3.2, 1.3, 0.2, "Iris-setosa"],
    [5.0, 3.5, 1.6, 0.6, "Iris-setosa"],
    [5.1, 3.8, 1.9, 0.4, "Iris-setosa"],
    [4.8, 3.0, 1.4, 0.3, "Iris-setosa"],
    [5.1, 3.8, 1.6, 0.2, "Iris-setosa"],
    [4.6, 3.2, 1.4, 0.2, "Iris-setosa"],
    [5.3, 3.7, 1.5, 0.2, "Iris-setosa"],
    [5.0, 3.3, 1.4, 0.2, "Iris-setosa"],
    [7.0, 3.2, 4.7, 1.4, "Iris-versicolor"],
    [6.4, 3.2, 4.5, 1.5, "Iris-versicolor"],
    [6.9, 3.1, 4.9, 1.5, "Iris-versicolor"],
    [5.5, 2.3, 4.0, 1.3, "Iris-versicolor"],
    [6.5, 2.8, 4.6, 1.5, "Iris-versicolor"],
    [5.7, 2.8, 4.5, 1.3, "Iris-versicolor"],
    [6.3, 3.3, 4.7, 1.6, "Iris-versicolor"],
    [4.9, 2.4, 3.3, 1.0, "Iris-versicolor"],
    [6.6, 2.9, 4.6, 1.3, "Iris-versicolor"],
    [5.2, 2.7, 3.9, 1.4, "Iris-versicolor"],
    [5.0, 2.0, 3.5, 1.0, "Iris-versicolor"],
    [5.9, 3.0, 4.2, 1.5, "Iris-versicolor"],
    [6.0, 2.2, 4.0, 1.0, "Iris-versicolor"],
    [6.1, 2.9, 4.7, 1.4, "Iris-versicolor"],
    [5.6, 2.9, 3.6, 1.3, "Iris-versicolor"],
    [6.7, 3.1, 4.4, 1.4, "Iris-versicolor"],
    [5.6, 3.0, 4.5, 1.5, "Iris-versicolor"],
    [5.8, 2.7, 4.1, 1.0, "Iris-versicolor"],
    [6.2, 2.2, 4.5, 1.5, "Iris-versicolor"],
    [5.6, 2.5, 3.9, 1.1, "Iris-versicolor"],
    [5.9, 3.2, 4.8, 1.8, "Iris-versicolor"],
    [6.1, 2.8, 4.0, 1.3, "Iris-versicolor"],
    [6.3, 2.5, 4.9, 1.5, "Iris-versicolor"],
    [6.1, 2.8, 4.7, 1.2, "Iris-versicolor"],
    [6.4, 2.9, 4.3, 1.3, "Iris-versicolor"],
    [6.6, 3.0, 4.4, 1.4, "Iris-versicolor"],
    [6.8, 2.8, 4.8, 1.4, "Iris-versicolor"],
    [6.7, 3.0, 5.0, 1.7, "Iris-versicolor"],
    [6.0, 2.9, 4.5, 1.5, "Iris-versicolor"],
    [5.7, 2.6, 3.5, 1.0, "Iris-versicolor"],
    [5.5, 2.4, 3.8, 1.1, "Iris-versicolor"],
    [5.5, 2.4, 3.7, 1.0, "Iris-versicolor"],
    [5.8, 2.7, 3.9, 1.2, "Iris-versicolor"],
    [6.0, 2.7, 5.1, 1.6, "Iris-versicolor"],
    [5.4, 3.0, 4.5, 1.5, "Iris-versicolor"],
    [6.0, 3.4, 4.5, 1.6, "Iris-versicolor"],
    [6.7, 3.1, 4.7, 1.5, "Iris-versicolor"],
    [6.3, 2.3, 4.4, 1.3, "Iris-versicolor"],
    [5.6, 3.0, 4.1, 1.3, "Iris-versicolor"],
    [5.5, 2.5, 4.0, 1.3, "Iris-versicolor"],
    [5.5, 2.6, 4.4, 1.2, "Iris-versicolor"],
    [6.1, 3.0, 4.6, 1.4, "Iris-versicolor"],
    [5.8, 2.6, 4.0, 1.2, "Iris-versicolor"],
    [5.0, 2.3, 3.3, 1.0, "Iris-versicolor"],
    [5.6, 2.7, 4.2, 1.3, "Iris-versicolor"],
    [5.7, 3.0, 4.2, 1.2, "Iris-versicolor"],
    [5.7, 2.9, 4.2, 1.3, "Iris-versicolor"],
    [6.2, 2.9, 4.3, 1.3, "Iris-versicolor"],
    [5.1, 2.5, 3.0, 1.1, "Iris-versicolor"],
    [5.7, 2.8, 4.1, 1.3, "Iris-versicolor"],
    [6.3, 3.3, 6.0, 2.5, "Iris-virginica"],
    [5.8, 2.7, 5.1, 1.9, "Iris-virginica"],
    [7.1, 3.0, 5.9, 2.1, "Iris-virginica"],
    [6.3, 2.9, 5.6, 1.8, "Iris-virginica"],
    [6.5, 3.0, 5.8, 2.2, "Iris-virginica"],
    [7.6, 3.0, 6.6, 2.1, "Iris-virginica"],
    [4.9, 2.5, 4.5, 1.7, "Iris-virginica"],
    [7.3, 2.9, 6.3, 1.8, "Iris-virginica"],
    [6.7, 2.5, 5.8, 1.8, "Iris-virginica"],
    [7.2, 3.6, 6.1, 2.5, "Iris-virginica"],
    [6.5, 3.2, 5.1, 2.0, "Iris-virginica"],
    [6.4, 2.7, 5.3, 1.9, "Iris-virginica"],
    [6.8, 3.0, 5.5, 2.1, "Iris-virginica"],
    [5.7, 2.5, 5.0, 2.0, "Iris-virginica"],
    [5.8, 2.8, 5.1, 2.4, "Iris-virginica"],
    [6.4, 3.2, 5.3, 2.3, "Iris-virginica"],
    [6.5, 3.0, 5.5, 1.8, "Iris-virginica"],
    [7.7, 3.8, 6.7, 2.2, "Iris-virginica"],
    [7.7, 2.6, 6.9, 2.3, "Iris-virginica"],
    [6.0, 2.2, 5.0, 1.5, "Iris-virginica"],
    [6.9, 3.2, 5.7, 2.3, "Iris-virginica"],
    [5.6, 2.8, 4.9, 2.0, "Iris-virginica"],
    [7.7, 2.8, 6.7, 2.0, "Iris-virginica"],
    [6.3, 2.7, 4.9, 1.8, "Iris-virginica"],
    [6.7, 3.3, 5.7, 2.1, "Iris-virginica"],
    [7.2, 3.2, 6.0, 1.8, "Iris-virginica"],
    [6.2, 2.8, 4.8, 1.8, "Iris-virginica"],
    [6.1, 3.0, 4.9, 1.8, "Iris-virginica"],
    [6.4, 2.8, 5.6, 2.1, "Iris-virginica"],
    [7.2, 3.0, 5.8, 1.6, "Iris-virginica"],
    [7.4, 2.8, 6.1, 1.9, "Iris-virginica"],
    [7.9, 3.8, 6.4, 2.0, "Iris-virginica"],
    [6.4, 2.8, 5.6, 2.2, "Iris-virginica"],
    [6.3, 2.8, 5.1, 1.5, "Iris-virginica"],
    [6.1, 2.6, 5.6, 1.4, "Iris-virginica"],
    [7.7, 3.0, 6.1, 2.3, "Iris-virginica"],
    [6.3, 3.4, 5.6, 2.4, "Iris-virginica"],
    [6.4, 3.1, 5.5, 1.8, "Iris-virginica"],
    [6.0, 3.0, 4.8, 1.8, "Iris-virginica"],
    [6.9, 3.1, 5.4, 2.1, "Iris-virginica"],
    [6.7, 3.1, 5.6, 2.4, "Iris-virginica"],
    [6.9, 3.1, 5.1, 2.3, "Iris-virginica"],
    [5.8, 2.7, 5.1, 1.9, "Iris-virginica"],
    [6.8, 3.2, 5.9, 2.3, "Iris-virginica"],
    [6.7, 3.3, 5.7, 2.5, "Iris-virginica"],
    [6.7, 3.0, 5.2, 2.3, "Iris-virginica"],
    [6.3, 2.5, 5.0, 1.9, "Iris-virginica"],
    [6.5, 3.0, 5.2, 2.0, "Iris-virginica"],
    [6.2, 3.4, 5.4, 2.3, "Iris-virginica"],
    [5.9, 3.0, 5.1, 1.8, "Iris-virginica"]
];

function prepare(data) {

    const result = new Array(data.length);

    for (let i = 0; i < data.length; i++) {
        const row = data[i];
        const instance = new Object();
        instance.x = row.slice(0, 4);
        const specimen = row[4].trim();
        if (specimen == "Iris-setosa")  instance.y = [1, 0, 0];
        else if (specimen == "Iris-versicolor")  instance.y = [0, 1, 0];
        else instance.y = [0, 0, 1];
        result[i] = instance;
    }

    // shuffling in a predictable way to allow reproducibility for debug/test/evaluation/validation
    const pos = [ 60, 59, 57, 2, 75, 103, 107, 28, 77, 125, 57, 8, 17, 24, 127, 59, 100, 105, 53, 92, 53, 
        33, 16, 7, 44, 10, 75, 52, 112, 103, 65, 80, 51, 101, 54, 62, 69, 39, 66, 66, 30, 64, 35, 17, 20, 
        36, 98, 95, 58, 65, 19, 3, 48, 48, 39, 56, 0, 80, 23, 9, 17, 21, 9, 12, 50, 32, 55, 65, 36, 0, 18, 
        62, 17, 24, 38, 30, 9, 45, 31, 64, 47, 57, 37, 12, 63, 17, 11, 7, 1, 3, 3, 40, 40, 18, 28, 18, 51, 
        35, 13, 6, 36, 9, 47, 33, 27, 22, 31, 41, 30, 15, 10, 32, 22, 15, 1, 2, 14, 10, 5, 25, 21, 21, 26, 
        10, 14, 4, 16, 2, 2, 18, 8, 2, 9, 14, 8, 10, 13, 9, 10, 2, 7, 2, 0, 0, 1, 3, 0, 2, 0 ];

    for (let i = 0; i < pos.length; i++) {
        let from = pos.length - i;
        let to = pos[i];
        let a = result[from];
        result[from] = result[to];
        result[to] = a;
    }

    return result;

}

exports.dataset = prepare(rawdata);